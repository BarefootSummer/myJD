<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: "Microsoft Yahei";
            font-size: 14px;
        }
    </style>
</head>
<body>
<img src="img/default.jpg" alt=""/>
</body>
<script>
    var str="http://xt96.com/style/img/20130130090359_47920.jpg";
    var oImg=new Image;
    oImg.src=str;
//    oImg.onload=function(){
//        alert("小度网络");
//    };
//    oImg.onerror=function(){
//        alert("稍后访问");
//    };

    function offset(ele){
        var l=ele.offsetLeft;
        var t=ele.offsetTop;
        var p=ele.offsetParent;

        while(p){
            if(window.navigator.userAgent.indexOf("MSIE 8")>-1){
                l+=p.offsetLeft;
                t+=p.offsetTop;
            }else{//标准浏览器要把边框计算进去
                l+=p.offsetLeft+p.clientLeft;//client左边框的宽
                t+=p.offsetTop+p.clientTop;//上边框的宽
            }
            p=p.offsetParent;
        }

        return {l:l,t:t}
    }
    window.onload=function(){
        var oImg=document.getElementsByTagName("img").item(0);
        var imgBottom=offset(oImg).t+oImg.clientHeight;
        window.onscroll=function(){
            var windowBottom=(document.documentElement.scrollTop||document.body.scrollTop)+(document.documentElement.clientHeight||document.body.clientHeight);
            if(imgBottom<windowBottom){
                var tempImg=new Image;
                tempImg.src=str+"?"+Math.random();
                tempImg.onload=function(){
                    oImg.src=this.src;
                };
                oImg.scr="img/default.jpg";
            }
        }
    };
    //alert(document.getElementsByTagName("img").item(0).clientHeight);

</script>
</html>